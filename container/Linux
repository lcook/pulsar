FROM docker.io/golang:1.25-alpine AS builder

RUN apk add --no-cache bmake binutils git

WORKDIR /app
COPY . .

RUN bmake GO_CMD=/usr/local/go/bin/go build

FROM docker.io/alpine:latest

WORKDIR /app

COPY --from=builder /app/pulsar .
